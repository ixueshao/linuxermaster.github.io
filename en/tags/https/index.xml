<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" 
  xmlns:content="http://purl.org/rss/1.0/modules/content/" 
  xmlns:dc="http://purl.org/dc/elements/1.1/" 
  xmlns:atom="http://www.w3.org/2005/Atom" 
  xmlns:sy="http://purl.org/rss/1.0/modules/syndication/" 
  xmlns:media="http://search.yahoo.com/mrss/">
  <channel>
    <title>HTTPS on äº‘åŸç”Ÿç”Ÿæ€åœˆ</title>
    <link>https://linuxermaster.github.io/en/tags/https/</link>
    <description>Recent content in HTTPS on äº‘åŸç”Ÿç”Ÿæ€åœˆ</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>en</language>
    <managingEditor>marionxue@qq.com (Marionxue)</managingEditor>
    <webMaster>marionxue@qq.com (Marionxue)</webMaster>
    <copyright>[äº‘åŸç”Ÿç”Ÿæ€åœˆ](https://www.devopsman.cn) &amp;copy;2016-{year}, All Rights Reserved [è½¬è½½æ³¨æ˜å‡ºå¤„: devopsman.cn](https://www.devopsman.cn)</copyright>
    <lastBuildDate>Tue, 07 Jul 2020 12:00:06 +0900</lastBuildDate>
    <sy:updatePeriod>hourly</sy:updatePeriod>
    
        <atom:link href="https://linuxermaster.github.io/en/tags/https/index.xml" rel="self" type="application/rss+xml" />
    
    
    

      
      <item>
        <title>Harbor2.0 å®‰è£…éƒ¨ç½²å®è·µ(HTTPS)</title>
        <link>https://linuxermaster.github.io/en/posts/20200707-harbor2.0%E5%B8%A6https%E7%9A%84%E5%AE%89%E8%A3%85%E9%83%A8%E7%BD%B2%E5%AE%9E%E8%B7%B5/</link>
        <pubDate>Tue, 07 Jul 2020 12:00:06 +0900</pubDate>
        <author>marionxue@qq.com (Marionxue)</author>
        <atom:modified>Tue, 07 Jul 2020 12:00:06 +0900</atom:modified>
        <guid>https://linuxermaster.github.io/en/posts/20200707-harbor2.0%E5%B8%A6https%E7%9A%84%E5%AE%89%E8%A3%85%E9%83%A8%E7%BD%B2%E5%AE%9E%E8%B7%B5/</guid>
        <description>Harboræ˜¯ä¸€ä¸ªå¼€æºçš„ç®¡ç† Docker é•œåƒä»¥åŠ helm å›¾è¡¨çš„é¡¹ç›®ï¼Œè¯¥é¡¹ç›®åŒ…æ‹¬äº†æƒé™ç®¡ç†ã€LDAP è®¤è¯é›†æˆã€æ—¥å¿—äº‹ä»¶å®¡è®¡ã€ç®¡ç†ç•Œé¢ portalã€å¤š Harbor å®ä¾‹ä¹‹é—´æ•°æ®åŒæ­¥çš„å…¬å¸ƒåŠŸèƒ½ï¼Œ</description>
        <content:encoded>&lt;p&gt;&lt;a href=&#34;https://goharbor.io/&#34; title=&#34;Harbor&#34;&gt;Harbor&lt;/a&gt;æ˜¯ä¸€ä¸ªå¼€æºçš„ç®¡ç† Docker é•œåƒä»¥åŠ helm å›¾è¡¨çš„é¡¹ç›®ï¼Œè¯¥é¡¹ç›®åŒ…æ‹¬äº†æƒé™ç®¡ç†ã€LDAP è®¤è¯é›†æˆã€æ—¥å¿—äº‹ä»¶å®¡è®¡ã€ç®¡ç†ç•Œé¢ portalã€å¤š Harbor å®ä¾‹ä¹‹é—´æ•°æ®åŒæ­¥çš„å…¬å¸ƒåŠŸèƒ½ï¼ŒåŒæ—¶ä»Šå¹´ Harbor ä¹Ÿä» CNCF ä¸­æ¯•ä¸šäº†ï¼Œæä¾›äº†æ›´åˆè§„ã€æ€§èƒ½æ›´å¥½ã€æ“ä½œä½“éªŒæ›´ä½³çš„ 2.0 ç‰ˆæœ¬ï¼Œå¸®åŠ©æ‚¨åœ¨è·¨ kubernetes å’Œ Docker ç­‰äº‘åŸç”Ÿè®¡ç®—å¹³å°æŒç»­é«˜æ•ˆçš„ç®¡ç†åˆ¶å“ã€‚&lt;/p&gt;
&lt;h4 id=&#34;harbor-ç¯å¢ƒéœ€æ±‚&#34;&gt;Harbor ç¯å¢ƒéœ€æ±‚&lt;/h4&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th align=&#34;left&#34;&gt;Software&lt;/th&gt;
&lt;th align=&#34;left&#34;&gt;Version&lt;/th&gt;
&lt;th align=&#34;left&#34;&gt;Description&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td align=&#34;left&#34;&gt;Docker engine&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;17.06.0-ce åŠä»¥ä¸Š&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;å®‰è£…å‚è€ƒ: &lt;a href=&#34;https://docs.docker.com/engine/installation/&#34; title=&#34;Docker Engine documentation&#34;&gt;Docker Docs&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align=&#34;left&#34;&gt;Docker Compose&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;1.18.0 ç‰ˆæœ¬åŠä»¥ä¸Šå³å¯&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;å®‰è£…å‚è€ƒ: &lt;a href=&#34;https://docs.docker.com/compose/install/&#34; title=&#34;Docker Compose documentation&#34;&gt;Docker-Compose Docs&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align=&#34;left&#34;&gt;Openssl&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;ä¸ºé¿å…å®‰å…¨æ¼æ´ï¼Œå»ºè®®å‡çº§åˆ°æœ€æ–°&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;å¯ä»¥é€‰æ‹©è‡ªç­¾è¯ä¹¦: &lt;a href=&#34;https://goharbor.io/docs/2.0.0/install-config/configure-https/&#34; title=&#34;Configure HTTPS Access to Harbor&#34;&gt;Config HTTPS&lt;/a&gt;ä¹Ÿå¯ä»¥ç”³è¯·ä¸ªäººå…è´¹ç‰ˆè¯ä¹¦&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h4 id=&#34;harbor-ç¦»çº¿å®‰è£…&#34;&gt;Harbor ç¦»çº¿å®‰è£…&lt;/h4&gt;
&lt;p&gt;è€ƒè™‘åˆ°ç½‘ç»œå’Œæµ‹è¯•çš„éœ€æ±‚ï¼Œæˆ‘ä»¬é€šè¿‡è¿…é›·åœ¨ GITHUB ä¸Šä¸‹è½½ç¦»çº¿å®‰è£…çš„ harbor å®‰è£…åŒ…ï¼Œå…¶ä¸­åŒ…å«äº† Harbor æ‰€éœ€è¦çš„åŸºç¡€é•œåƒï¼Œç¦»çº¿å®‰è£…æ—¶é€šè¿‡ç¦»çº¿å®‰è£…åŒ…å†…çš„è„šæœ¬å°†å¯¼å‡ºçš„é•œåƒæ–‡ä»¶é€šè¿‡&lt;code&gt;docker load -i&lt;/code&gt;å¯¼å…¥åˆ°æœåŠ¡å™¨å†…ï¼Œç„¶åé€šè¿‡ç¼–æ’è½¯ä»¶&lt;code&gt;docker-compose&lt;/code&gt;è¿è¡Œï¼Œç›¸å½“æ–¹ä¾¿ã€‚ä½¿ç”¨åˆ°çš„åŸºç¡€é•œåƒå¦‚ä¸‹:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;goharbor/chartmuseum-photon          v2.0.0              4db8d6aa63e9        &lt;span class=&#34;m&#34;&gt;8&lt;/span&gt; weeks ago         127MB
goharbor/redis-photon                v2.0.0              c89ea2e53cc0        &lt;span class=&#34;m&#34;&gt;8&lt;/span&gt; weeks ago         72.2MB
goharbor/trivy-adapter-photon        v2.0.0              6122c52b7e48        &lt;span class=&#34;m&#34;&gt;8&lt;/span&gt; weeks ago         103MB
goharbor/clair-adapter-photon        v2.0.0              dd2210cb7f53        &lt;span class=&#34;m&#34;&gt;8&lt;/span&gt; weeks ago         62MB
goharbor/clair-photon        &lt;span class=&#34;m&#34;&gt;2&lt;/span&gt;        v2.0.0              f7c7fcc52278        &lt;span class=&#34;m&#34;&gt;8&lt;/span&gt; weeks ago         171MB
goharbor/notary-server-photon        v2.0.0              983ac10ed8be        &lt;span class=&#34;m&#34;&gt;8&lt;/span&gt; weeks ago         143MB
goharbor/notary-signer-photon        v2.0.0              bee1b6d75e0d        &lt;span class=&#34;m&#34;&gt;8&lt;/span&gt; weeks ago         140MB
goharbor/harbor-registryctl          v2.0.0              c53c32d58d04        &lt;span class=&#34;m&#34;&gt;8&lt;/span&gt; weeks ago         102MB
goharbor/registry-photon             v2.0.0              afdc1b7ada36        &lt;span class=&#34;m&#34;&gt;8&lt;/span&gt; weeks ago         84.5MB
goharbor/nginx-photon                v2.0.0              17892f03e56c        &lt;span class=&#34;m&#34;&gt;8&lt;/span&gt; weeks ago         43.6MB
goharbor/harbor-log                  v2.0.0              5f8ff08e795c        &lt;span class=&#34;m&#34;&gt;8&lt;/span&gt; weeks ago         82MB
goharbor/harbor-jobservice           v2.0.0              c68a2495bf55        &lt;span class=&#34;m&#34;&gt;8&lt;/span&gt; weeks ago         116MB
goharbor/harbor-core                 v2.0.0              3aa3af64baf8        &lt;span class=&#34;m&#34;&gt;8&lt;/span&gt; weeks ago         138MB
goharbor/harbor-portal               v2.0.0              e0b1d3c894c4        &lt;span class=&#34;m&#34;&gt;8&lt;/span&gt; weeks ago         52.4MB
goharbor/harbor-db                   v2.0.0              5c76f0296cec        &lt;span class=&#34;m&#34;&gt;8&lt;/span&gt; weeks ago         154MB
goharbor/prepare                     v2.0.0              7266d49995ed        &lt;span class=&#34;m&#34;&gt;8&lt;/span&gt; weeks ago         158MB
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;åœ¨å®‰è£…ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦ä¿®æ”¹ä¸€ä¸‹ Harbor çš„é…ç½®æ–‡ä»¶ï¼Œæ¯”å¦‚ä¿®æ”¹ harbor ä½¿ç”¨çš„åŸŸåã€HTTPS è¯ä¹¦çš„ä½ç½®ç­‰,ä¸‹é¢æˆ‘ä»¬ç®€å•çš„è¯´æ˜:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;â˜¸ï¸  k8sdevğŸ”¥ default  ~/Downloads î‚° ğŸ³ ğŸ‘‰ scp harbor-offline-installer-v2.0.0.tgz root@192.168.99.128:/root/
&lt;span class=&#34;c1&#34;&gt;# åœ¨192.168.99.128ä¸Šè¿›è¡ŒHarborçš„å®‰è£…é…ç½®&lt;/span&gt;
root@master:~# tar xf harbor-offline-installer-v2.0.0.tgz
root@master:~/harbor# mv harbor.yml.tmpl harbor.yml
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;æˆ‘ä»¬é‡æ–°å‘½åé…ç½®æ–‡ä»¶ harbor.yml åï¼Œç¼–è¾‘è¯¥æ–‡ä»¶&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;hostname: harbor.devopsman.cn &lt;span class=&#34;c1&#34;&gt;# é…ç½®è‡ªå·±çš„harborè®¿é—®åŸŸå&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;å¦‚æœä½ éœ€è¦é…ç½® HTTPS æ¥è®¿é—® harbor,é‚£ä¹ˆéœ€è¦ç”³è¯·è¯ä¹¦æˆ–è€…è‡ªå·±ç”Ÿæˆçš„è‡ªç­¾è¯ä¹¦ï¼Œè¿™é‡Œæˆ‘ä»¬ç›´æ¥åœ¨ DNSPOD ä¸Šç”³è¯·ä¸€ä¸ªå…è´¹çš„ä¸€å¹´å¯ç”¨çš„è¯ä¹¦&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;images.assets/image-20200707133220228.png&#34; alt=&#34;image-20200707133220228&#34; /&gt;&lt;/p&gt;
&lt;p&gt;å®é™…ä¸Š https çš„è¯ä¹¦æ˜¯é…ç½®ç»™ harbor çš„åå‘ä»£ç† nginx çš„ï¼Œæˆ‘ä»¬ä¸€èˆ¬è®¿é—® harbor å…¶å®æ˜¯è®¿é—® nginx ç„¶åå°†è¯·æ±‚è½¬å‘ç»™ harborï¼Œåœ¨æˆ‘ä»¬å®‰è£…å®Œæˆ harbor ä¹‹åï¼Œå¯ä»¥è¿è¡Œä»¥ä¸‹å‘½ä»¤æŸ¥çœ‹åˆ° Nginx ç›¸å…³çš„åå‘ä»£ç†çš„é…ç½®:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;root@master:~/harbor# docker &lt;span class=&#34;nb&#34;&gt;exec&lt;/span&gt; -it nginx cat /etc/nginx/nginx.conf
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬éœ€è¦é…ç½®ä¸€ä¸‹ HTTPS å¯ä¿¡è¯ä¹¦ï¼Œé¦–å…ˆåœ¨ DNSPOD ä¸Šä¸‹è½½ç”³è¯·å®¡æ‰¹æˆåŠŸåçš„è¯ä¹¦&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;images.assets/image-20200707133835126.png&#34; alt=&#34;image-20200707133835126&#34; /&gt;&lt;/p&gt;
&lt;p&gt;ç„¶åè§£å‹ï¼Œå°†è§£å‹åçš„ Nginx ç›®å½•ä¸‹çš„ä¸¤ä¸ªæ–‡ä»¶é‡å‘½åæ”¾åœ¨/data/cert/ç›®å½•ä¸‹&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;root@master:~/harbor/Nginx# ls -alh
total 32K
drwxr-xr-x   &lt;span class=&#34;m&#34;&gt;2&lt;/span&gt; root root 4.0K Jul  &lt;span class=&#34;m&#34;&gt;7&lt;/span&gt;  &lt;span class=&#34;m&#34;&gt;2020&lt;/span&gt; .
drwxr-xr-x &lt;span class=&#34;m&#34;&gt;100&lt;/span&gt; root root  20K Jul  &lt;span class=&#34;m&#34;&gt;7&lt;/span&gt; 01:37 ..
-rw-r--r--   &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt; root root 3.7K Jul  &lt;span class=&#34;m&#34;&gt;7&lt;/span&gt;  &lt;span class=&#34;m&#34;&gt;2020&lt;/span&gt; 1_harbor.devopsman.cn_bundle.crt
-rw-r--r--   &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt; root root 1.7K Jul  &lt;span class=&#34;m&#34;&gt;7&lt;/span&gt;  &lt;span class=&#34;m&#34;&gt;2020&lt;/span&gt; 2_harbor.devopsman.cn.key
&lt;span class=&#34;c1&#34;&gt;# é‡å‘½åä¹‹åæ”¾åœ¨/data/certç›®å½•ä¸‹ï¼Œå¦‚æœæ²¡æœ‰è¿™ä¸ªç›®å½•ï¼Œéœ€è¦æå‰åˆ›å»º&lt;/span&gt;
mkdir -pv /data/cert
root@master:~/harbor/Nginx# cp 1_harbor.devopsman.cn_bundle.crt /data/cert/harbor.devopsman.cn.crt
root@master:~/harbor/Nginx# cp 2_harbor.devopsman.cn.key /data/cert/harbor.devopsman.cn.key
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;ç„¶ååœ¨ harbor.yml ä¸‹é…ç½®è¯ä¹¦çš„ä½ç½®å³å¯:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;7
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# https related config&lt;/span&gt;
https:
  &lt;span class=&#34;c1&#34;&gt;# https port for harbor, default is 443&lt;/span&gt;
  port: &lt;span class=&#34;m&#34;&gt;443&lt;/span&gt;
  &lt;span class=&#34;c1&#34;&gt;# The path of cert and key files for nginx&lt;/span&gt;
  certificate: /data/cert/harbor.devopsman.cn.crt
  private_key: /data/cert/harbor.devopsman.cn.key
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;é…ç½®å®Œè¯ä¹¦ï¼Œä½¿ç”¨ prepare è¿›è¡Œé…ç½® nginx çš„ https è¯ä¹¦&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;nb&#34;&gt;cd&lt;/span&gt; /root/harbor &lt;span class=&#34;c1&#34;&gt;# harborç¦»çº¿ç‰ˆè§£å‹åçš„æ–‡ä»¶ç›®å½•&lt;/span&gt;
root@master:~/harbor# ./prepare
prepare base dir is &lt;span class=&#34;nb&#34;&gt;set&lt;/span&gt; to /root/harbor
...
Generated configuration file: /compose_location/docker-compose.yml
Clean up the input dir
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;æ— æœæ²¡æœ‰æŠ¥é”™ï¼Œç„¶åæˆ‘ä»¬å°±å¯ä»¥ç›´æ¥ä½¿ç”¨ docker-compose è¿è¡Œ harbor çš„å®¹å™¨äº†&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;root@master:~/harbor# docker-compose up -d
Creating network &lt;span class=&#34;s2&#34;&gt;&amp;#34;harbor_harbor&amp;#34;&lt;/span&gt; with the default driver
Creating harbor-log ... &lt;span class=&#34;k&#34;&gt;done&lt;/span&gt;
Creating harbor-portal ... &lt;span class=&#34;k&#34;&gt;done&lt;/span&gt;
Creating registry      ... &lt;span class=&#34;k&#34;&gt;done&lt;/span&gt;
Creating registryctl   ... &lt;span class=&#34;k&#34;&gt;done&lt;/span&gt;
Creating harbor-db     ... &lt;span class=&#34;k&#34;&gt;done&lt;/span&gt;
Creating redis         ... &lt;span class=&#34;k&#34;&gt;done&lt;/span&gt;
Creating harbor-core   ... &lt;span class=&#34;k&#34;&gt;done&lt;/span&gt;
Creating nginx             ... &lt;span class=&#34;k&#34;&gt;done&lt;/span&gt;
Creating harbor-jobservice ... &lt;span class=&#34;k&#34;&gt;done&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h2 id=&#34;å®‰è£…æ£€æµ‹&#34;&gt;å®‰è£…æ£€æµ‹&lt;/h2&gt;
&lt;p&gt;ç„¶åæˆ‘ä»¬å¯ä»¥ç›´æ¥é€šè¿‡ docker login æµ‹è¯•ä¸€ä¸‹&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;8
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;root@master:~/harbor# docker login harbor.devopsman.cn
Username: admin
Password:                  &lt;span class=&#34;c1&#34;&gt;# é»˜è®¤çš„å¯†ç åœ¨harbor.ymlæ–‡ä»¶ä¸­ï¼Œå¯ä»¥è‡ªè¡Œä¿®æ”¹&lt;/span&gt;
WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store

Login Succeeded
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;é€šè¿‡æµè§ˆå™¨æŸ¥çœ‹æ˜¯å¦èƒ½ç™»å½•ä»¥åŠè¯ä¹¦çš„æœ‰æ•ˆæœŸ&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;images.assets/image-20200707140232427.png&#34; alt=&#34;image-20200707140232427&#34; /&gt;&lt;/p&gt;
&lt;p&gt;æ­¤æ—¶æˆ‘ä»¬å¯ä»¥é€šè¿‡æ¨é€ä¸€ä¸ªæµ‹è¯•çš„é•œåƒï¼Œæ£€æŸ¥æ˜¯å¤Ÿæ­£å¸¸ï¼Œæˆ‘ä»¬å…ˆåœ¨æµè§ˆå™¨ä¸­è®¿é—® harbor.devopsman.cnï¼Œç„¶åæ‰¾åˆ°æ¨é€å‘½ä»¤ï¼ŒæŸ¥çœ‹æ¨é€çš„æ ¼å¼ï¼Œä¸‹é¢æˆ‘ä»¬æµ‹è¯•ä¸€ä¸‹çœ‹çœ‹ç»“æœï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;images.assets/image-20200707134847120.png&#34; alt=&#34;image-20200707134847120&#34; /&gt;&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬é€‰æ‹©ä¸€ä¸ª k8s é›†ç¾¤æœåŠ¡åŸºç¡€ç»„ä»¶&lt;code&gt;kube-proxy&lt;/code&gt;çš„é•œåƒï¼Œé‡æ–°æ‰“ä¸ªé•œåƒçš„ tagï¼Œç„¶åæ¨é€åˆ°æˆ‘ä»¬çš„&lt;code&gt;devopsman&lt;/code&gt;ä»“åº“å†…:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;root@master:~/harbor# docker tag k8s.gcr.io/kube-proxy:v1.18.0 harbor.devopsman.cn/devopsman/kube-proxy:v1.18.0
root@master:~/harbor# docker push harbor.devopsman.cn/devopsman/kube-proxy:v1.18.0
The push refers to repository &lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;harbor.devopsman.cn/devopsman/kube-proxy&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;
46b37415a80a: Pushed
0d8d54147a3a: Pushed
597151d24476: Pushed
ad9fb2411669: Pushed
2dc2f2423ad1: Pushed
682fbb19de80: Pushed
fc4976bd934b: Pushed
v1.18.0: digest: sha256:b832454a96a848ad5c51ad8a499ef2173b627ded2c225e3a6be5aad9446cb211 size: &lt;span class=&#34;m&#34;&gt;1786&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;é€šè¿‡æŸ¥çœ‹ï¼Œç¡®å®æˆåŠŸçš„å®Œæˆäº†é•œåƒçš„ä¸Šä¼ :&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;images.assets/image-20200707135312426.png&#34; alt=&#34;image-20200707135312426&#34; /&gt;&lt;/p&gt;
&lt;p&gt;è¿™æ ·å°±å®Œæˆäº† harbor ç¯å¢ƒçš„åŸºç¡€æ­å»ºï¼Œæ¥ä¸‹æ¥å°±å¥½å¥½çš„ä½“éªŒ Harbor å¸¦æ¥çš„æ–°åŠŸèƒ½å§ï¼Œé€šè¿‡å›¾ä¸Šçœ‹åˆ° harbor2.0 ç›®å‰æ”¯æŒ&lt;code&gt;Dark&lt;/code&gt;ä¸»é¢˜ï¼Œhelm æ¨é€ç­‰ï¼Œå¼€å§‹åŠ¨æ‰‹å§ï¼Œä½“éªŒ Harbor çš„æ–°åŠŸèƒ½å’Œç‰¹æ€§ï¼Œæœ¬ç« èŠ‚å°±å®Œæˆäº† harbor çš„åŸºç¡€æ¢ç´¢ã€‚&lt;/p&gt;
</content:encoded>
        <dc:creator>äº‘åŸç”Ÿç”Ÿæ€åœˆ</dc:creator>
        <media:content url="https://linuxermaster.github.ioimages/posts/harbor-syncdata.jpg" medium="image"><media:title type="html">featured image</media:title></media:content>
        
        
        
          
            
              <category>Harbor</category>
            
          
            
              <category>é•œåƒä»“åº“</category>
            
          
            
              <category>HTTPS</category>
            
          
            
              <category>é«˜å¯ç”¨</category>
            
          
        
        
        
      </item>
      

    
  </channel>
</rss>