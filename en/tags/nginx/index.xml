<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" 
  xmlns:content="http://purl.org/rss/1.0/modules/content/" 
  xmlns:dc="http://purl.org/dc/elements/1.1/" 
  xmlns:atom="http://www.w3.org/2005/Atom" 
  xmlns:sy="http://purl.org/rss/1.0/modules/syndication/" 
  xmlns:media="http://search.yahoo.com/mrss/">
  <channel>
    <title>Nginx on äº‘åŸç”Ÿç”Ÿæ€åœˆ</title>
    <link>https://linuxermaster.github.io/en/tags/nginx/</link>
    <description>Recent content in Nginx on äº‘åŸç”Ÿç”Ÿæ€åœˆ</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>en</language>
    <managingEditor>marionxue@qq.com (Marionxue)</managingEditor>
    <webMaster>marionxue@qq.com (Marionxue)</webMaster>
    <copyright>[äº‘åŸç”Ÿç”Ÿæ€åœˆ](https://www.devopsman.cn) &amp;copy;2016-{year}, All Rights Reserved [è½¬è½½æ³¨æ˜å‡ºå¤„: devopsman.cn](https://www.devopsman.cn)</copyright>
    <lastBuildDate>Sun, 12 Jul 2020 23:00:06 +0900</lastBuildDate>
    <sy:updatePeriod>hourly</sy:updatePeriod>
    
        <atom:link href="https://linuxermaster.github.io/en/tags/nginx/index.xml" rel="self" type="application/rss+xml" />
    
    
    

      
      <item>
        <title>Nginxä¸“è¾‘-02 Nginxé™æ€æœåŠ¡å™¨è§„èŒƒåŒ–é…ç½®</title>
        <link>https://linuxermaster.github.io/en/posts/20200712-nginx%E4%B8%93%E8%BE%91-02-nginx%E9%9D%99%E6%80%81%E6%9C%8D%E5%8A%A1%E5%99%A8%E8%A7%84%E8%8C%83%E5%8C%96%E9%85%8D%E7%BD%AE/</link>
        <pubDate>Sun, 12 Jul 2020 23:00:06 +0900</pubDate>
        <author>marionxue@qq.com (Marionxue)</author>
        <atom:modified>Sun, 12 Jul 2020 23:00:06 +0900</atom:modified>
        <guid>https://linuxermaster.github.io/en/posts/20200712-nginx%E4%B8%93%E8%BE%91-02-nginx%E9%9D%99%E6%80%81%E6%9C%8D%E5%8A%A1%E5%99%A8%E8%A7%84%E8%8C%83%E5%8C%96%E9%85%8D%E7%BD%AE/</guid>
        <description>èƒŒæ™¯ç ”ç©¶ åˆ†äº«ä¸€ä¸ªé€šè¿‡ nginx æ­å»ºä¸€ä¸ªé™æ€èµ„æºçš„ web æœåŠ¡å™¨ï¼Œå®è·µä¸­å°†ä¼šæ¶‰åŠåˆ°ä¸‰ä¸ªéƒ¨åˆ†çš„å†…å®¹ï¼š é™æ€æ–‡ä»¶æœåŠ¡å™¨çš„é…ç½® Nginxæ¨¡å—ä¹‹gzip è‡ªå®šä¹‰è®¿é—®æ—¥å¿—çš„æ ¼å¼: Embedded Variables é™æ€æ–‡ä»¶</description>
        <content:encoded>&lt;h2 id=&#34;èƒŒæ™¯ç ”ç©¶&#34;&gt;èƒŒæ™¯ç ”ç©¶&lt;/h2&gt;
&lt;p&gt;åˆ†äº«ä¸€ä¸ªé€šè¿‡ &lt;a href=&#34;https://nginx.org&#34; title=&#34;Nginxç½‘ç«™&#34;&gt;nginx&lt;/a&gt; æ­å»ºä¸€ä¸ªé™æ€èµ„æºçš„ web æœåŠ¡å™¨ï¼Œå®è·µä¸­å°†ä¼šæ¶‰åŠåˆ°ä¸‰ä¸ªéƒ¨åˆ†çš„å†…å®¹ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;é™æ€æ–‡ä»¶æœåŠ¡å™¨çš„é…ç½®&lt;/li&gt;
&lt;li&gt;Nginxæ¨¡å—ä¹‹&lt;a href=&#34;http://nginx.org/en/docs/http/ngx_http_gzip_module.html&#34; title=&#34;Nginx-module-gzip&#34;&gt;gzip&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;è‡ªå®šä¹‰è®¿é—®æ—¥å¿—çš„æ ¼å¼: &lt;code&gt;Embedded Variables&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&#34;é™æ€æ–‡ä»¶æœåŠ¡å™¨&#34;&gt;é™æ€æ–‡ä»¶æœåŠ¡å™¨&lt;/h2&gt;
&lt;p&gt;ç®€å•çš„å°±é€šè¿‡ä¸€ä¸ªè‡ªå®šä¹‰çš„&lt;code&gt;index.html&lt;/code&gt;æ–‡ä»¶å½“åšä¸€ä¸ªé™æ€é¡µé¢Demoï¼Œä¸‹é¢å‡†å¤‡ä¸€ä¸‹é™æ€æ–‡ä»¶èµ„æºå­˜å‚¨çš„ä½ç½®ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;mkdir /webserver/nginx18/ops/
&lt;span class=&#34;nb&#34;&gt;echo&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;äº‘åŸç”Ÿç”Ÿæ€åœˆ&amp;#34;&lt;/span&gt; &amp;gt; /webserver/nginx18/ops/index.html
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;å¢åŠ nginxé…ç½®æ–‡ä»¶ï¼Œåœ¨&lt;code&gt;/webserver/nginx18/conf/nginx.conf&lt;/code&gt;é‡Œå¢åŠ ä¸€ä¸ª server é…ç½®æ®µï¼Œç„¶åé€šè¿‡ alias æ˜ å°„åˆ°è™šæ‹Ÿç›®å½•ã€‚æ³¨æ„è®¿é—®æ—¶ location ä¸­çš„&lt;code&gt;/&lt;/code&gt;å¯¹åº”çš„æ˜¯ ops åé¢çš„&lt;code&gt;/&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-conf&#34; data-lang=&#34;conf&#34;&gt;server {
     listen      80;
     server_name web.devopsman.cn;
     location / {
        alias ops/;
     }
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;æµ‹è¯•è®¿é—®:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-bashj&#34; data-lang=&#34;bashj&#34;&gt;â˜¸ï¸  k8sdevğŸ”¥ default  ~ î‚° ğŸ³ ğŸ‘‰ curl web.devopsman.cn
é™æ€ç½‘ç«™demo
â˜¸ï¸  k8sdevğŸ”¥ default  ~ î‚° ğŸ³ ğŸ‘‰ curl -I web.devopsman.cn
HTTP/1.1 200 OK
Server: nginx/1.18.0
Date: Sat, 11 Jul 2020 14:11:46 GMT
Content-Type: text/html
Content-Length: 17
Last-Modified: Sat, 11 Jul 2020 14:11:13 GMT
Connection: keep-alive
ETag: &amp;quot;5f09c881-11&amp;quot;
Accept-Ranges: bytes
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&#34;å¼€å¯é™æ€ç½‘ç«™å‹ç¼©&#34;&gt;å¼€å¯é™æ€ç½‘ç«™å‹ç¼©&lt;/h2&gt;
&lt;p&gt;nginxå¯ä»¥é€šè¿‡ä¸€ç§æµè§ˆå™¨æ”¯æŒä¸”å‹ç¼©ä¸å—æ•°æ®æŸå¤±çš„gzipæ¨¡å—å°†æ ·å¼æ–‡ä»¶ã€æ–‡æœ¬æ–‡ä»¶ã€å›¾ç‰‡ç­‰å‹ç¼©ä¹‹ååœ¨ç”¨æˆ·çš„è¯·æ±‚ä¹‹é—´ä¼ è¾“ï¼Œä½†æ˜¯å¯¹äº&lt;code&gt;jpgã€jpegã€png&lt;/code&gt;è¿™ç±»æœ¬èº«å­˜åœ¨å‹ç¼©æ€§è´¨ä¸Šçš„å›¾ç‰‡æ¥è¯´ï¼Œå‹ç¼©æ•ˆæœä¸æ˜¯å¾ˆæ˜æ˜¾ï¼Œä¸»è¦ä½“ç°åœ¨æ–‡æœ¬æ–‡ä»¶çš„å‹ç¼©ä¸Šï¼Œå› æ­¤å¯¹äºæœåŠ¡çš„æä¾›è€…æ¥è¯´ï¼Œå‡å°‘äº†ä¸å°çš„æµé‡å¸¦å®½çš„ä½¿ç”¨ï¼ŒåŒæ—¶ä¹Ÿæé«˜è®¿é—®é€Ÿåº¦ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;  gzip  on&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
  gzip_min_length 1&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;# è¡¨ç¤ºå°äº1kä¸å‹ç¼©&lt;/span&gt;
  gzip_comp_level 2&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;# è®¾ç½®å‹ç¼©çš„çº§åˆ«&lt;/span&gt;
  gzip_types text_plain application/x-javascript text/css application/xml text/javascript application/x-httpd-php image/jpeg image/gif image/png&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;  &lt;span class=&#34;c1&#34;&gt;# å¯ç”¨å‹ç¼©ç±»å‹çš„æ–‡ä»¶&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;&lt;code&gt;gzip_comp_level&lt;/code&gt;çš„å‹ç¼©æ¯”è®¾ç½®åŒºé—´ä¸º&lt;code&gt;0-9&lt;/code&gt;,è®¾ç½®çš„å‹ç¼©æ¯”è¶Šé«˜ï¼Œæ–‡ä»¶è¶Šå°ï¼Œä½†æ˜¯å¯¹æœåŠ¡å™¨CPUçš„æ¶ˆè€—ä¹Ÿå°±è¶Šå¤šï¼Œä¸€èˆ¬å‡ºäºè¿™ç§é€‰æ‹©å‹ç¼©æ¯”ä¸º&lt;code&gt;6&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;19
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;20
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;root@master:/webserver/nginx18/conf# curl -I http://web.devopsman.cn/test.html
HTTP/1.1 &lt;span class=&#34;m&#34;&gt;200&lt;/span&gt; OK
Server: nginx/1.18.0
Date: Sun, &lt;span class=&#34;m&#34;&gt;12&lt;/span&gt; Jul &lt;span class=&#34;m&#34;&gt;2020&lt;/span&gt; 13:45:22 GMT
Content-Type: text/html
Content-Length: &lt;span class=&#34;m&#34;&gt;20480&lt;/span&gt;
Last-Modified: Sun, &lt;span class=&#34;m&#34;&gt;12&lt;/span&gt; Jul &lt;span class=&#34;m&#34;&gt;2020&lt;/span&gt; 13:34:14 GMT
Connection: keep-alive
ETag: &lt;span class=&#34;s2&#34;&gt;&amp;#34;5f0b1156-5000&amp;#34;&lt;/span&gt;
Accept-Ranges: bytes

root@master:/webserver/nginx18/conf# curl -H &lt;span class=&#34;s2&#34;&gt;&amp;#34;Accept-Encoding: gzip&amp;#34;&lt;/span&gt; -I http://web.devopsman.cn/test.html
HTTP/1.1 &lt;span class=&#34;m&#34;&gt;200&lt;/span&gt; OK
Server: nginx/1.18.0
Date: Sun, &lt;span class=&#34;m&#34;&gt;12&lt;/span&gt; Jul &lt;span class=&#34;m&#34;&gt;2020&lt;/span&gt; 13:45:26 GMT
Content-Type: text/html
Last-Modified: Sun, &lt;span class=&#34;m&#34;&gt;12&lt;/span&gt; Jul &lt;span class=&#34;m&#34;&gt;2020&lt;/span&gt; 13:34:14 GMT
Connection: keep-alive
ETag: W/&lt;span class=&#34;s2&#34;&gt;&amp;#34;5f0b1156-5000&amp;#34;&lt;/span&gt;
Content-Encoding: gzip
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;é€šè¿‡ä»¥ä¸Šæµ‹è¯•çš„æ–¹å¼ï¼Œæ—¢å¯ä»¥è®¿é—®&lt;code&gt;gzip_types&lt;/code&gt;ä¸­è®¾å®šçš„ç±»å‹çš„èµ„æºçš„æ—¶å€™ï¼Œé™¤äº†å›¾ç‰‡ä¹‹å¤–ï¼Œåº”è¯¥èƒ½æˆåŠŸçš„æ‰¾åˆ°&lt;code&gt;Content-Encoding: gzip&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;h2 id=&#34;é…ç½®è®¿é—®æ—¥å¿—æ ¼å¼&#34;&gt;é…ç½®è®¿é—®æ—¥å¿—æ ¼å¼&lt;/h2&gt;
&lt;p&gt;nginx çš„æ—¥å¿—æ ¼å¼ï¼Œæ˜¯é€šè¿‡ nginx æ”¯æŒçš„ç¯å¢ƒå˜é‡å°†æ‰€éœ€è¦çš„æ—¥å¿—ä¿¡æ¯ç»™ç»„è£…åœ¨ä¸€èµ·ï¼Œåœ¨ nginx é‡Œï¼Œé™¤äº†å†…ç½®çš„ç¯å¢ƒå˜é‡ä¹‹å¤–ï¼Œè¿˜åŒ…æ‹¬ç¬¬ä¸‰æ–¹æ¨¡å—çš„ç¯å¢ƒå˜é‡ä¿¡æ¯ï¼Œæ¯”å¦‚ï¼Œnginx æ ¸å¿ƒæ¨¡å—çš„æ”¯æŒçš„ç¯å¢ƒå˜é‡å¯ä»¥åœ¨&lt;a href=&#34;http://nginx.org/en/docs/http/ngx_http_core_module.html#variables&#34; title=&#34;Nignx-core Embedded Variables&#34;&gt;Embedded Variables&lt;/a&gt;æ‰¾åˆ°ï¼Œç¬¬ä¸‰æ–¹æ”¯æŒå“ªäº›ç¯å¢ƒå˜é‡å¯ä»¥åœ¨å¯¹åº”çš„æ¨¡å—æ–‡æ¡£ä¸­æ‰¾åˆ°ï¼Œæ¯”å¦‚&lt;code&gt;realip&lt;/code&gt;æ¨¡å—æ”¯æŒçš„ç¯å¢ƒå˜é‡&lt;a href=&#34;http://nginx.org/en/docs/stream/ngx_stream_realip_module.html#variables&#34; title=&#34;nginx-realip Embedded variables&#34;&gt;Embedded Variables&lt;/a&gt;ï¼Œä¸‹é¢æ˜¯æ˜¯ä¸€ä¸ªå®šä¹‰çš„æ¡ˆä¾‹ï¼Œå®šä¹‰ä¸€ä¸ª&lt;code&gt;main&lt;/code&gt;ç±»å‹çš„æ—¥å¿—æ ¼å¼ã€‚&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-conf&#34; data-lang=&#34;conf&#34;&gt;log_format main &#39;{&#39;
  &#39;&amp;quot;@timestamp&amp;quot;:&amp;quot;$time_iso8601&amp;quot;,&#39;
  &#39;&amp;quot;connection&amp;quot;:&amp;quot;$connection&amp;quot;,&#39;
  &#39;&amp;quot;connection_requests&amp;quot;:&amp;quot;$connection_requests&amp;quot;,&#39;
  &#39;&amp;quot;request&amp;quot;:&amp;quot;$request&amp;quot;,&#39;
  &#39;&amp;quot;request_time&amp;quot;:&amp;quot;$request_time&amp;quot;,&#39;
  &#39;&amp;quot;request_length&amp;quot;:&amp;quot;$request_length&amp;quot;,&#39;
  &#39;&amp;quot;request_uri&amp;quot;:&amp;quot;$request_uri&amp;quot;,&#39;
  &#39;&amp;quot;request_method&amp;quot;:&amp;quot;$request_method&amp;quot;,&#39;
  &#39;&amp;quot;server_name&amp;quot;:&amp;quot;$server_name&amp;quot;,&#39;
  &#39;&amp;quot;status&amp;quot;:&amp;quot;$status&amp;quot;,&#39;
  &#39;&amp;quot;remote_user&amp;quot;:&amp;quot;$remote_user&amp;quot;,&#39;
  &#39;&amp;quot;remote_addr&amp;quot;:&amp;quot;$remote_addr&amp;quot;,&#39;
  &#39;&amp;quot;time_local&amp;quot;:&amp;quot;$time_local&amp;quot;,&#39;
  &#39;&amp;quot;body_bytes_sent&amp;quot;:&amp;quot;$body_bytes_sent&amp;quot;,&#39;
  &#39;&amp;quot;bytes_sent&amp;quot;:&amp;quot;$bytes_sent&amp;quot;,&#39;
  &#39;&amp;quot;msec&amp;quot;:&amp;quot;$msec&amp;quot;,&#39;
  &#39;&amp;quot;upstream_status&amp;quot;:&amp;quot;$upstream_status&amp;quot;,&#39;
  &#39;&amp;quot;upstream_addr&amp;quot;:&amp;quot;$upstream_addr&amp;quot;,&#39;
  &#39;&amp;quot;upstream_response_time&amp;quot;:&amp;quot;$upstream_response_time&amp;quot;,&#39;
  &#39;&amp;quot;http_sessionKey&amp;quot;:&amp;quot;$http_sessionKey&amp;quot;,&#39;
  &#39;&amp;quot;cookie_sk&amp;quot;:&amp;quot;$cookie_sk&amp;quot;,&#39;
  &#39;&amp;quot;http_referer&amp;quot;:&amp;quot;$http_referer&amp;quot;,&#39;
  &#39;&amp;quot;http_user_agent&amp;quot;:&amp;quot;$http_user_agent&amp;quot;,&#39;
  &#39;&amp;quot;http_x_forwarded_for&amp;quot;:&amp;quot;$http_x_forwarded_for&amp;quot;&#39;
  &#39;}&#39;;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;åœ¨å®šä¹‰å¥½æ—¥å¿—æ ¼å¼ä¹‹åï¼Œé€šè¿‡&lt;code&gt;access_log&lt;/code&gt;æŒ‡ä»¤é…ç½®æ—¥å¿—çš„å­˜å‚¨è·¯å¾„ï¼Œåœ¨é…ç½®å®Œæ—¥å¿—ä¹‹åï¼Œ&lt;code&gt;reload&lt;/code&gt;ä¸€ä¸‹å°±å¯è‡ªåŠ¨åˆ›å»ºæ—¥å¿—æ–‡ä»¶ï¼Œä»¥ä¸Šçš„ç¯å¢ƒå˜é‡å«ä¹‰éƒ½å¯ä»¥åœ¨å®˜ç½‘ä¸Šæ‰¾åˆ°å‡†ç¡®çš„é‡Šä¹‰:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;access_log  logs/web.devopsman.cn.access.log  main&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;æ­¤æ—¶ï¼Œå‘é€ä¸€ä¸ª http çš„è¯·æ±‚ï¼Œå°±ä¼šæŒ‰ç…§æ—¥å¿—çš„æ ¼å¼è®°å½•æ—¥å¿—å†™å…¥åˆ°æ—¥å¿—æ–‡ä»¶ä¸­:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;root@master:/webserver/nginx18/logs# tail -f web.devopsman.cn.access.log
&lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;@timestamp&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;2020-07-11T10:26:55-04:00&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;connection&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;17&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;connection_requests&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;1&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;request&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;HEAD / HTTP/1.1&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;request_time&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;0.000&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;request_length&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;81&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;request_uri&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;/&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;request_method&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;HEAD&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;server_name&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;web.devopsman.cn&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;status&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;200&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;remote_user&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;-&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;remote_addr&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;192.168.99.1&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;time_local&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;11/Jul/2020:10:26:55 -0400&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;body_bytes_sent&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;0&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;bytes_sent&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;236&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;msec&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;1594477615.080&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;upstream_status&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;-&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;upstream_addr&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;-&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;upstream_response_time&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;-&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;http_sessionKey&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;-&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;cookie_sk&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;-&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;http_referer&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;-&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;http_user_agent&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;curl/7.64.1&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;http_x_forwarded_for&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;-&amp;#34;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;</content:encoded>
        <dc:creator>äº‘åŸç”Ÿç”Ÿæ€åœˆ</dc:creator>
        <media:content url="https://linuxermaster.github.ioimages/posts/GZip_tutorial.png" medium="image"><media:title type="html">featured image</media:title></media:content>
        
        
        
          
            
              <category>Nginx</category>
            
          
            
              <category>gzip</category>
            
          
            
              <category>æ—¥å¿—è§„èŒƒ</category>
            
          
        
        
        
      </item>
      
      <item>
        <title>Nginxä¸“è¾‘-03 Nginxä¹‹ç¼“å­˜ä»£ç†æ¨¡å—çš„ä½¿ç”¨</title>
        <link>https://linuxermaster.github.io/en/posts/20200713-nginx%E4%B8%93%E8%BE%91-03-nginx%E6%90%AD%E5%BB%BA%E4%B8%80%E4%B8%AA%E7%BC%93%E5%AD%98%E6%9C%8D%E5%8A%A1%E5%99%A8/</link>
        <pubDate>Sun, 12 Jul 2020 23:00:06 +0900</pubDate>
        <author>marionxue@qq.com (Marionxue)</author>
        <atom:modified>Sun, 12 Jul 2020 23:00:06 +0900</atom:modified>
        <guid>https://linuxermaster.github.io/en/posts/20200713-nginx%E4%B8%93%E8%BE%91-03-nginx%E6%90%AD%E5%BB%BA%E4%B8%80%E4%B8%AA%E7%BC%93%E5%AD%98%E6%9C%8D%E5%8A%A1%E5%99%A8/</guid>
        <description>ç¼“å­˜æœåŠ¡å™¨åœºæ™¯ é…ç½®ä¸€ä¸ªç¼“å­˜æœåŠ¡å™¨ï¼Œå¸¦æ¥çš„ä¼˜ç¼ºç‚¹ï¼Œå¯ä»¥æ ¹æ®ä¸åŒçš„åœºæ™¯é€‚å½“é€‰æ‹©ï¼š å½“ä¸Šæ¸¸upstreamç«¯çš„æœåŠ¡å™¨çš„å“åº”å†…å®¹å‘ç”Ÿäº†å˜åŒ–çš„æ—¶å€™ï¼Œç¼“å­˜æœåŠ¡å™¨å“åº”çš„å†…å®¹åœ¨å¤±</description>
        <content:encoded>&lt;h2 id=&#34;ç¼“å­˜æœåŠ¡å™¨åœºæ™¯&#34;&gt;ç¼“å­˜æœåŠ¡å™¨åœºæ™¯&lt;/h2&gt;
&lt;p&gt;é…ç½®ä¸€ä¸ªç¼“å­˜æœåŠ¡å™¨ï¼Œå¸¦æ¥çš„ä¼˜ç¼ºç‚¹ï¼Œå¯ä»¥æ ¹æ®ä¸åŒçš„åœºæ™¯é€‚å½“é€‰æ‹©ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;å½“ä¸Šæ¸¸&lt;code&gt;upstream&lt;/code&gt;ç«¯çš„æœåŠ¡å™¨çš„å“åº”å†…å®¹å‘ç”Ÿäº†å˜åŒ–çš„æ—¶å€™ï¼Œç¼“å­˜æœåŠ¡å™¨å“åº”çš„å†…å®¹åœ¨å¤±æ•ˆæ—¶é—´ä¹‹å‰æ˜¯ä¸ä¼šå˜åŒ–çš„ï¼Œå› æ­¤è¦ç¡®è®¤æ˜¯å¦é€‚ç”¨å½“å‰çš„åœºæ™¯&lt;/li&gt;
&lt;li&gt;é…ç½®ç¼“å­˜ä»£ç†æœåŠ¡å™¨ï¼Œå¯ä»¥æé«˜ç½‘ç«™çš„è®¿é—®æ€§èƒ½&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&#34;é…ç½®å®è·µ&#34;&gt;é…ç½®å®è·µ&lt;/h2&gt;
&lt;p&gt;åœ¨&lt;code&gt;http&lt;/code&gt;æ®µé…ç½®ç¼“å­˜çš„ç›¸å…³å‚æ•°ï¼Œå¦‚ç¼“å­˜çš„å­˜å‚¨ä½ç½®ã€ç¼“å­˜çº§åˆ«ã€ç¼“å­˜ç©ºé—´ã€ç¼“å­˜å­˜å‚¨æœ€å¤§å¤šå°‘ï¼Œç¼“å­˜æœ‰æ•ˆæ—¶å¸¸&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# http&lt;/span&gt;
proxy_cache_path /tmp/nginxcache &lt;span class=&#34;nv&#34;&gt;levels&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;1:2 &lt;span class=&#34;nv&#34;&gt;keys_zone&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;my_cache:10m &lt;span class=&#34;nv&#34;&gt;max_size&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;10g &lt;span class=&#34;nv&#34;&gt;inactive&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;60m &lt;span class=&#34;nv&#34;&gt;use_temp_path&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;off&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;é…ç½®ç¼“å­˜æœåŠ¡å™¨&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-conf&#34; data-lang=&#34;conf&#34;&gt;upstream local {
	server 127.0.0.1:8089;
}
server {
	server_name proxy.devopsman.cn;
	listen 80;
	location / {
		proxy_set_header Host $host;
		proxy_set_header X-Real_IP $remote_addr;
		proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;;
		proxy_cache my_cache;
		proxy_cache_key $host$uri$is_args$args;
		proxy_cache_valid 200 304 302 1d;
		proxy_pass http://local;
	}
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ç„¶åé‡è½½nginxä¹‹åï¼Œnginxå°±ä¼šè‡ªåŠ¨çš„ç”Ÿæˆå¯¹åº”ç¼“å­˜ç›®å½•&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;19
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;20
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;21
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;22
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;nginx -s reload
root@master:/tmp# ls -alh &lt;span class=&#34;p&#34;&gt;|&lt;/span&gt;grep nginx
drwx------  &lt;span class=&#34;m&#34;&gt;9&lt;/span&gt; www  root 4.0K Jul &lt;span class=&#34;m&#34;&gt;12&lt;/span&gt; 06:07 nginxcache
root@master:/tmp# tree ./nginxcache/
./nginxcache/
â”œâ”€â”€ &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;
â”‚Â Â  â””â”€â”€ 7d
â”œâ”€â”€ &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;
â”‚Â Â  â””â”€â”€ &lt;span class=&#34;m&#34;&gt;54&lt;/span&gt;
â”œâ”€â”€ &lt;span class=&#34;m&#34;&gt;4&lt;/span&gt;
â”‚Â Â  â”œâ”€â”€ &lt;span class=&#34;m&#34;&gt;38&lt;/span&gt;
â”‚Â Â  â””â”€â”€ &lt;span class=&#34;m&#34;&gt;92&lt;/span&gt;
â”œâ”€â”€ &lt;span class=&#34;m&#34;&gt;6&lt;/span&gt;
â”‚Â Â  â””â”€â”€ &lt;span class=&#34;m&#34;&gt;27&lt;/span&gt;
â”œâ”€â”€ a
â”‚Â Â  â””â”€â”€ &lt;span class=&#34;m&#34;&gt;39&lt;/span&gt;
â”œâ”€â”€ b
â”‚Â Â  â””â”€â”€ 2b
â””â”€â”€ f
    â””â”€â”€ c4

&lt;span class=&#34;m&#34;&gt;15&lt;/span&gt; directories, &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt; files
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;å½“æˆ‘ä»¬å¯¹&lt;code&gt;proxy.devopsman.cn&lt;/code&gt;å‘èµ·æ–°çš„èµ„æºè¯·æ±‚ï¼Œèµ„æºå°±ä¼šè¢«ç¼“å­˜åœ¨è¯¥ç›®å½•ä¸‹ã€‚å½“æˆ‘ä»¬æŠŠ&lt;code&gt;127.0.0.1:8089&lt;/code&gt;æœåŠ¡ç»™åœæ‰ä¹‹åï¼Œè®¿é—®ä¹‹å‰è®¿é—®è¿‡çš„èµ„æºä¾æ—§å¯ä»¥æ­£å¸¸çš„è·å–ï¼Œå› ä¸ºå½±å“çš„æ•°æ®æ˜¯ä»ç¼“å­˜ä¸­ç›´æ¥è¿”å›çš„ã€‚&lt;/p&gt;
</content:encoded>
        <dc:creator>äº‘åŸç”Ÿç”Ÿæ€åœˆ</dc:creator>
        <media:content url="https://linuxermaster.github.ioimages/posts/GZip_tutorial.png" medium="image"><media:title type="html">featured image</media:title></media:content>
        
        
        
          
            
              <category>Nginx</category>
            
          
            
              <category>ç¼“å­˜ä»£ç†æœåŠ¡å™¨</category>
            
          
        
        
        
      </item>
      
      <item>
        <title>Nginxä¸“è¾‘- 01 Nginx1.18ç¼–è¯‘å®‰è£…</title>
        <link>https://linuxermaster.github.io/en/posts/20200711-nginx%E4%B8%93%E8%BE%91-01-nginx1.18%E7%BC%96%E8%AF%91%E5%AE%89%E8%A3%85/</link>
        <pubDate>Sat, 11 Jul 2020 23:00:06 +0900</pubDate>
        <author>marionxue@qq.com (Marionxue)</author>
        <atom:modified>Sat, 11 Jul 2020 23:00:06 +0900</atom:modified>
        <guid>https://linuxermaster.github.io/en/posts/20200711-nginx%E4%B8%93%E8%BE%91-01-nginx1.18%E7%BC%96%E8%AF%91%E5%AE%89%E8%A3%85/</guid>
        <description>Nginx ç¼–è¯‘å®‰è£…çš„å‰æœŸå‡†å¤‡ Nginx çš„ç¼–è¯‘å®‰è£…ä¸€èˆ¬ç”¨äºéœ€è¦åŠ å…¥ä¸€äº›æ‰©å±•çš„ç¬¬ä¸‰æ–¹æ¨¡å—æˆ–è€…è‡ªç ”å‘çš„æ‰©å±•åŠŸèƒ½åŒ…ï¼Œæ‰€ä»¥åœ¨ç¼–è¯‘ä¹‹å‰éœ€è¦æå‰ä¸‹è½½å‡†å¤‡å¥½è¿™äº›æ‰©å±•çš„åŒ…æ–‡ä»¶ï¼Œæ¯”å¦‚æˆ‘ä»¬ç¼–è¯‘çš„æ—¶å€™</description>
        <content:encoded>&lt;h2 id=&#34;nginx-ç¼–è¯‘å®‰è£…çš„å‰æœŸå‡†å¤‡&#34;&gt;Nginx ç¼–è¯‘å®‰è£…çš„å‰æœŸå‡†å¤‡&lt;/h2&gt;
&lt;p&gt;Nginx çš„ç¼–è¯‘å®‰è£…ä¸€èˆ¬ç”¨äºéœ€è¦åŠ å…¥ä¸€äº›æ‰©å±•çš„ç¬¬ä¸‰æ–¹æ¨¡å—æˆ–è€…è‡ªç ”å‘çš„æ‰©å±•åŠŸèƒ½åŒ…ï¼Œæ‰€ä»¥åœ¨ç¼–è¯‘ä¹‹å‰éœ€è¦æå‰ä¸‹è½½å‡†å¤‡å¥½è¿™äº›æ‰©å±•çš„åŒ…æ–‡ä»¶ï¼Œæ¯”å¦‚æˆ‘ä»¬ç¼–è¯‘çš„æ—¶å€™å¢åŠ éœ€è¦ä½¿ç”¨&lt;code&gt;jemalloc&lt;/code&gt;ä¼˜åŒ– nginx å†…å­˜ï¼Œä½¿ç”¨&lt;code&gt;openssl&lt;/code&gt;å®ç° nginx çš„ https æ•°æ®åŠ å¯†ï¼Œä½¿ç”¨&lt;code&gt;zlib&lt;/code&gt;åº“æ‰©å±• nginx å‹ç¼©çš„åŠŸèƒ½ç­‰ï¼Œä¸‹é¢æˆ‘ä»¬ä¸‹è½½ä¸€äº›æˆ‘ä»¬éœ€è¦çš„åŸºç¡€ä¾èµ–åº“çš„åŒ…æ–‡ä»¶:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;nb&#34;&gt;cd&lt;/span&gt; /usr/local/src
wget http://nginx.org/download/nginx-1.14.2.tar.gz
wget http://nginx.org/download/nginx-1.10.3.tar.gz
wget https://www.zlib.net/fossils/zlib-1.2.8.tar.gz
wget https://openssl.org/source/openssl-1.0.2d.tar.gz
wget https://github.com/simplresty/ngx_devel_kit/archive/v0.3.0.tar.gz -O ngx_devel_kit.tar.gz
wget https://github.com/jemalloc/jemalloc/releases/download/4.5.0/jemalloc-4.5.0.tar.bz2
wget https://github.com/yaoweibin/nginx_upstream_check_module/archive/v0.3.0.tar.gz -O nginx_upstream_check_module.tar.gz
wget https://github.com/openresty/lua-nginx-module/archive/v0.10.10.tar.gz -O lua-nginx-module.tar.gz
tar xf jemalloc-4.5.0.tar.bz2
&lt;span class=&#34;nb&#34;&gt;cd&lt;/span&gt; jemalloc-4.5.0 &lt;span class=&#34;o&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; ./configure &lt;span class=&#34;o&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; make &lt;span class=&#34;o&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; make install
apt-get install -y  lua5.1-0-dev
sudo apt-get install libpcre3 libpcre3-dev &lt;span class=&#34;c1&#34;&gt;# support pcre&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;&lt;code&gt;jemalloc&lt;/code&gt;çš„å®‰è£…ä¹Ÿå¯ä»¥ç›´æ¥ä½¿ç”¨&lt;code&gt;apt&lt;/code&gt;å®‰è£…&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;apt-get install -y libjemalloc-dev
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;å¦‚æœåœ¨ç¼–è¯‘çš„è¿‡ç¨‹ä¸­å‡ºç°ä¸€äº›ä¸‹é¢ç±»ä¼¼çš„é”™è¯¯ï¼Œå¯ä»¥é€šè¿‡å®‰è£…å¼€å‘è€…å·¥å…·åŒ…è§£å†³è¿™ä¸ªé—®é¢˜:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;7
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;checking &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; xsltproc... &lt;span class=&#34;nb&#34;&gt;false&lt;/span&gt;
checking &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; gcc... no
checking &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; cc... no
checking &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; cl.exe... no

&lt;span class=&#34;c1&#34;&gt;# ubuntuä¸Šå®‰è£…å¼€å‘è€…å·¥å…·åŒ…&lt;/span&gt;
sudo apt install build-essential -y
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h2 id=&#34;ç¼–è¯‘å®‰è£…-nginx1180&#34;&gt;ç¼–è¯‘å®‰è£… Nginx1.18.0&lt;/h2&gt;
&lt;p&gt;é¦–å…ˆæˆ‘ä»¬å‡†å¤‡ä¸€ä¸ª nginx çš„è¿è¡Œç”¨æˆ·&lt;code&gt;www&lt;/code&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;groupadd www &lt;span class=&#34;o&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; useradd www -g www
&lt;span class=&#34;c1&#34;&gt;# å¼€å§‹ç¼–è¯‘nginx&lt;/span&gt;
./configure --prefix&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;/webserver/nginx18 --user&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;www --group&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;www --with-pcre --with-zlib&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;/root/workspace/packages/nginx/zlib-1.2.8 --with-openssl&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;/root/workspace/packages/nginx/openssl-1.0.2d --with-http_gzip_static_module --with-http_realip_module --with-http_stub_status_module --add-module&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;/root/workspace/packages/nginx/ngx_devel_kit-0.3.0 --with-ld-opt&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;-ljemalloc --with-stream --with-http_ssl_module --add-module&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;/root/workspace/packages/nginx/nginx_upstream_check_module-0.3.0 &lt;span class=&#34;o&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; make &lt;span class=&#34;o&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; make install
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;ç¼–è¯‘å®Œæˆåï¼Œåœ¨å¯åŠ¨ nginx&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;/webserver/nginx18/sbin/nginx
&lt;span class=&#34;c1&#34;&gt;# ç„¶åæˆ‘ä»¬å°†nginxçš„workè¿›ç¨‹è®¾ç½®ä¸º2ä¸ªï¼Œä¿®æ”¹ç”¨æˆ·ä¸ºwww&lt;/span&gt;
root@master:/webserver/nginx18/sbin# ps -fe &lt;span class=&#34;p&#34;&gt;|&lt;/span&gt;grep nginx
root      &lt;span class=&#34;m&#34;&gt;50131&lt;/span&gt;      &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;  &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt; 08:43 ?        00:00:00 nginx: master process ./nginx
www       &lt;span class=&#34;m&#34;&gt;58005&lt;/span&gt;  &lt;span class=&#34;m&#34;&gt;50131&lt;/span&gt;  &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt; 08:54 ?        00:00:00 nginx: worker process
www       &lt;span class=&#34;m&#34;&gt;58006&lt;/span&gt;  &lt;span class=&#34;m&#34;&gt;50131&lt;/span&gt;  &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt; 08:54 ?        00:00:00 nginx: worker process

root@master:/webserver/nginx18/sbin# cp nginx /usr/local/bin/nginx
root@master:/webserver/nginx18/sbin# nginx -t
root@master:/webserver/nginx18/sbin# nginx -s reload
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;ç„¶åæˆ‘ä»¬é…ç½®ä¸€ä¸ª&lt;code&gt;web.devopsman.cn&lt;/code&gt;çš„åŸŸååˆ°&lt;code&gt;192.168.99.128&lt;/code&gt;ä¸Šï¼Œçœ‹ä¸€ä¸‹æœåŠ¡è¿è¡Œå’Œ DNS è§£æåçš„æ•ˆæœ:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;root@master:~/workspace/packages/nginx/nginx-1.18.0/contrib# curl -I web.devopsman.cn
HTTP/1.1 &lt;span class=&#34;m&#34;&gt;200&lt;/span&gt; OK
Server: nginx/1.18.0
Date: Sat, &lt;span class=&#34;m&#34;&gt;11&lt;/span&gt; Jul &lt;span class=&#34;m&#34;&gt;2020&lt;/span&gt; 13:03:29 GMT
Content-Type: text/html
Content-Length: &lt;span class=&#34;m&#34;&gt;612&lt;/span&gt;
Last-Modified: Sat, &lt;span class=&#34;m&#34;&gt;11&lt;/span&gt; Jul &lt;span class=&#34;m&#34;&gt;2020&lt;/span&gt; 12:38:29 GMT
Connection: keep-alive
ETag: &lt;span class=&#34;s2&#34;&gt;&amp;#34;5f09b2c5-264&amp;#34;&lt;/span&gt;
Accept-Ranges: bytes
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h2 id=&#34;é«˜äº®-nginx-çš„é…ç½®&#34;&gt;é«˜äº® Nginx çš„é…ç½®&lt;/h2&gt;
&lt;p&gt;nginx çš„æºç åŒ…é‡Œé¢æœ‰é…ç½® vim ç¼–è¾‘çš„ nginx é…ç½®æ–‡ä»¶æ—¶å†…å®¹æ ¼å¼é«˜äº®æ˜¾ç¤ºçš„é…ç½®æ–‡ä»¶ï¼Œç›´æ¥å°†å…¶æ‹·è´åˆ°&lt;code&gt;.vim&lt;/code&gt;ç›®å½•ä¸‹å³å¯&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;root@master:~# &lt;span class=&#34;nb&#34;&gt;cd&lt;/span&gt; /root/workspace/packages/nginx/nginx-1.18.0/contrib/
root@master:~/workspace/packages/nginx/nginx-1.18.0/contrib# ls -al
total &lt;span class=&#34;m&#34;&gt;24&lt;/span&gt;
drwxr-xr-x &lt;span class=&#34;m&#34;&gt;4&lt;/span&gt; www www &lt;span class=&#34;m&#34;&gt;4096&lt;/span&gt; Jul &lt;span class=&#34;m&#34;&gt;11&lt;/span&gt; 08:02 .
drwxr-xr-x &lt;span class=&#34;m&#34;&gt;9&lt;/span&gt; www www &lt;span class=&#34;m&#34;&gt;4096&lt;/span&gt; Jul &lt;span class=&#34;m&#34;&gt;11&lt;/span&gt; 08:21 ..
-rw-r--r-- &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt; www www &lt;span class=&#34;m&#34;&gt;1272&lt;/span&gt; Apr &lt;span class=&#34;m&#34;&gt;21&lt;/span&gt; 10:09 geo2nginx.pl
-rw-r--r-- &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt; www www  &lt;span class=&#34;m&#34;&gt;543&lt;/span&gt; Apr &lt;span class=&#34;m&#34;&gt;21&lt;/span&gt; 10:09 README
drwxr-xr-x &lt;span class=&#34;m&#34;&gt;2&lt;/span&gt; www www &lt;span class=&#34;m&#34;&gt;4096&lt;/span&gt; Jul &lt;span class=&#34;m&#34;&gt;11&lt;/span&gt; 08:02 unicode2nginx
drwxr-xr-x &lt;span class=&#34;m&#34;&gt;6&lt;/span&gt; www www &lt;span class=&#34;m&#34;&gt;4096&lt;/span&gt; Apr &lt;span class=&#34;m&#34;&gt;21&lt;/span&gt; 10:09 vim
root@master:~/workspace/packages/nginx/nginx-1.18.0/contrib# cp -r vim/* ~/.vim/
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;æ‹·è´è¿›å»ä¹‹åï¼Œæˆ‘ä»¬å‘ç°ç¼–è¾‘ nginx çš„é…ç½®æ–‡ä»¶å˜å¾—é«˜äº®äº†&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;images.assets/image-20200711210137505.png&#34; alt=&#34;image-20200711210137505&#34; /&gt;&lt;/p&gt;
</content:encoded>
        <dc:creator>äº‘åŸç”Ÿç”Ÿæ€åœˆ</dc:creator>
        <media:content url="https://linuxermaster.github.ioimages/posts/harbor-syncdata.jpg" medium="image"><media:title type="html">featured image</media:title></media:content>
        
        
        
          
            
              <category>Nginx</category>
            
          
            
              <category>ç¼–è¯‘</category>
            
          
            
              <category>web server</category>
            
          
        
        
        
      </item>
      

    
  </channel>
</rss>